<!DOCTYPE HTML>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="maximum-scale=1.0, minimum-scale=1.0, user-scalable=0, initial-scale=1.0, width=device-width" />
    <meta name="format-detection" content="telephone=no, email=no, date=no, address=no">
    <title>Profile Page</title>
    <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/api.css" />
<style>
.day{
  height:75px;
  border-style: ridge;
  border-width: 1px;
}
p{
  font-weight:bold;
  font-size: 0.6em;
}

@media screen and (min-width:350px){
  .img{
    position: fixed;
    margin-top: -43%;
    margin-left: 80%;
  }
}

@media screen and (max-width:350px){
  .img{
    position: fixed;
    margin-top: -33%;
    margin-left: 80%;
  }
}

</style>
</head>

<body class="wrap">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css" integrity="sha384-9gVQ4dYFwwWSjIDZnLEWnxCjeSWFphJiwGPXr1jddIhOegiu1FwO5qRGvFXOdJZ4" crossorigin="anonymous">


  <div class="container" style="margin-top:10px;">
    <div class="row">
  <div class="col 1">
<p>M</p>
</div>
  <div class="col 1">
<p>T</p>
</div>
  <div class="col 1">
<p>W</p>
</div>
  <div class="col 1">
<p>T</p>
</div>
  <div class="col 1">
<p>F</p>
</div>
  <div class="col 1">
<p>S</p>
</div>
  <div class="col 1">
<p>S</p>
</div>
</div>



<div class="row">
<div class="col 1 day" id="d0">
<p id="0"></p>
</div>
<div class="col 1 day" id="d1">
<p id="1"></p>
</div>
<div class="col 1 day" id="d2">
<p id="2"></p>
</div>
<div class="col 1 day" id="d3">
<p id="3"></p>
</div>
<div class="col 1 day" id="d4">
<p id="4"></p>
</div>
<div class="col 1 day" id="d5">
<p id="5"></p>
</div>
<div class="col 1 day" id="d6">
<p id="6"></p>
</div>
</div>


<div class="row">
<div class="col 1 day" id="d7">
<p id="7"></p>
</div>
<div class="col 1 day" id="d8">
<p id="8"></p>
</div>
<div class="col 1 day" id="d9">
<p id="9"></p>
</div>
<div class="col 1 day" id="d10">
<p id="10"></p>
</div>
<div class="col 1 day" id="d11">
<p id="11"></p>
</div>
<div class="col 1 day" id="d12">
<p id="12"></p>
</div>
<div class="col 1 day" id="d13">
<p id="13"></p>
</div>
</div>

<div class="row">
<div class="col 1 day" id="d14">
<p id="14"></p>
</div>
<div class="col 1 day" id="d15">
<p id="15"></p>
</div>
<div class="col 1 day" id="d16">
<p id="16"></p>
</div>
<div class="col 1 day" id="d17">
<p id="17"></p>
</div>
<div class="col 1 day" id="d18">
<p id="18"></p>
</div>
<div class="col 1 day" id="d19">
<p id="19"></p>
</div>
<div class="col 1 day" id="d20">
<p id="20"></p>
</div>
</div>

<div class="row">
<div class="col 1 day" id="d21">
<p id="21"></p>
</div>
<div class="col 1 day" id="d22">
<p id="22"></p>
</div>
<div class="col 1 day" id="d23">
<p id="23"></p>
</div>
<div class="col 1 day" id="d24">
<p id="24"></p>
</div>
<div class="col 1 day" id="d25">
<p id="25"></p>
</div>
<div class="col 1 day" id="d26">
<p id="26"></p>
</div>
<div class="col 1 day" id="d27">
<p id="27"></p>
</div>
</div>

<div class="row">
<div class="col 1 day" id="d28">
<p id="28"></p>
</div>
<div class="col 1 day" id="d29">
<p id="29"></p>
</div>
<div class="col 1 day" id="d30">
<p id="30"></p>
</div>
<div class="col 1 day" id="d31">
<p id="31"></p>
</div>
<div class="col 1 day" id="d32">
<p id="32"></p>
</div>
<div class="col 1 day" id="d33">
<p id="33"></p>
</div>
<div class="col 1 day" id="d34">
<p id="34"></p>
</div>
</div>
<div class="row">
<div class="col 1 day" id="d35">
<p id="35"></p>
</div>
<div class="col 1 day" id="d36">
<p id="36"></p>
</div>
<div class="col 1 day" id="d37">
<p id="37"></p>
</div>
<div class="col 1 day" id="d38">
<p id="38"></p>
</div>
<div class="col 1 day" id="d39">
<p id="39"></p>
</div>
<div class="col 1 day" id="d40">
<p id="40"></p>
</div>
<div class="col 1 day" id="d41">
<p id="41"></p>
</div>
</div>

<div class="img">
<img src="../image/add.png" id="addTimeButton" height="50px" width="50px"  data-toggle="modal" data-target="#exampleModal2">
</div>


  </div>

  <div class = "modal fade" id = "exampleModal" tabindex = "-1" role = "dialog" aria-labelledby ="exampleModalLabel" aria-hidden = "true">
             <div class="modal-dialog modal-dialog-centered" role="document">
                <div class = "modal-content">
                   <div class = "modal-header" >
                      <h5 class = "modal-title text-center col-12" id = "exampleModalLabel"><br>
                          </h5>

                    <hr>
                   </div>

                   <div class = "modal-body">
                   </div>

        </div>
        </div>
        </div>

        <div class = "modal fade" id = "exampleModal2" tabindex = "-1" role = "dialog" aria-labelledby ="exampleModalLabel" aria-hidden = "true">
                   <div class="modal-dialog modal-dialog-centered" role="document">
                      <div class = "modal-content">
                        <div class = "modal-header" >
                           <h6 class = "modal-title text-center col-12" id = "wcreate">
                             Which are you creating?
                           </h6>


                        </div>

                         <div class = "modal-body">
                           <div class="row">
                             <div class="col-6 text-center" style="border-right:1px solid black" id="goToAddTime">
                               Event
                               </div>
                               <div class="col-6 text-center">
                               Reminder
                             </div>
                             </div>

                         </div>

              </div>
              </div>
              </div>



  <script src = "https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity = "sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin = "anonymous"></script>
</body>
<script type="text/javascript" src="../script/api.js"></script>
<script type="text/javascript">
//document.getElementById("tusername").innerHTML = localStorage.getItem("username") + "'s timetable"
function blockPressed(date,day,task){
  console.log(day)
  document.getElementById("exampleModalLabel").innerHTML = date+'<br><p>'+ day +'</p>'
}
    apiready = function() {


      var theIp = ''
      $(function (){
        var myAjax = {
          init: function(){
            $.ajax({
              url: "../wifi.txt",
              async:false,
              success:function(data){
                theIp = data
              }
            })
          }
        };
        myAjax.init()
      });

      var curM = new Date().getMonth()
      var curY = new Date().getFullYear()
      if(api.pageParam.month){
        curM = api.pageParam.month
        curY = api.pageParam.year
        console.log(curM)
      }
      var allDay = ['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday']
      var allMonth = ['JAN','FEB','MAR','APR','MAY','JUN','JUL','AUG','SEP','OCT','NOV','DEC']
      api.sendEvent({
            name: 'changeMonth',
            extra: {
                month: allMonth[curM],
                year: curY

            }
        });

      var numDays = new Date(curY,curM,0).getDate() +1
      var startDay = new Date(curY,curM,1).getDay() // sunday is 0

      if(startDay == 0){
        startDay = 6
      }else{
        startDay = startDay -1
      }
      for(i=0;i<numDays;i++){

        var tday = String(startDay + i)

        document.getElementById(tday).innerHTML = String(i+1)
        var dday = "d" + tday

        var dayIndex = new Date(curY,curM,i+1).getDay()
        var funcStr = 'blockPressed("' + String(i+1) + '","' + allDay[dayIndex] + '","' +"placeholder" +'")'
        //console.log(funcStr)
        document.getElementById(dday).setAttribute('onclick',funcStr)
        document.getElementById(dday).setAttribute('data-toggle','modal')
        document.getElementById(dday).setAttribute('data-target','#exampleModal')
      }


      $("#goToAddTime").click(function(){
        $('#exampleModal2').modal('hide')
        api.openFrame({
          name: 'Add Time page',
          url: 'addTime.html',
          // bounces:true,
          rect: { // 推荐使用Margin布局，用于适配屏幕的动态变化
              marginTop:0,
              marginBottom: 60, // main页面距离win顶部的高度
              w: 'auto' // main页面的宽度 自适应屏幕宽度
          }
          //pageParam:
        })
      })



      api.addEventListener({
          name:'swipeleft'
      }, function(ret, err){
        api.openFrame({
          name: "Calendar Page"+String(Math.random()),
          url: 'calendar.html',
          pageParam:({month:curM+1,year:curY}),
          rect: {
            marginTop: 132,
            marginBottom: 60,
              w: 'auto'
          },
          animation:{
            type:"movein",
            subType:"from_right"
          },
        })
   })
   api.addEventListener({
       name:'swiperight'
   }, function(ret, err){
     api.openFrame({
       name: "Calendar Page"+String(Math.random()),
       url: 'calendar.html',
       pageParam:({month:curM-1,year:curY}),
       rect: {
         marginTop: 132,
         marginBottom: 60,
           w: 'auto'
       },
       animation:{
         type:"movein",
         subType:"from_left"
       },
     })
})


    };

</script>

</html>
