<!DOCTYPE HTML>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="maximum-scale=1.0, minimum-scale=1.0, user-scalable=0, initial-scale=1.0, width=device-width" />
    <meta name="format-detection" content="telephone=no, email=no, date=no, address=no">
    <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
    <link rel="stylesheet" type="text/css" href="../css/api.css" />
<style>
.day{
  height:30px;
  /*border-style: ridge;
  border-width: 1px;*/
  font-weight:bold;
  font-size: 0.6em;

}

.time{
  height:45px;
  border-style: ridge;
  border-width: 1px;

}
@media screen and (max-height:400px){
#bigAdd{
  position: fixed;

  margin-top: -270px;
  margin-left: 290px;
}
}

@media screen and (min-height:400px){
#bigAdd{
  position: fixed;

  margin-top: -120px;
  margin-left: 290px;
}
}



</style>
</head>

<body class="wrap">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css" integrity="sha384-9gVQ4dYFwwWSjIDZnLEWnxCjeSWFphJiwGPXr1jddIhOegiu1FwO5qRGvFXOdJZ4" crossorigin="anonymous">


  <div class="container" style="margin-top:10px;">
    <div class="row">
  <div class="col 1">
<p>M</p>
</div>
  <div class="col 1">
<p>T</p>
</div>
  <div class="col 1">
<p>W</p>
</div>
  <div class="col 1">
<p>T</p>
</div>
  <div class="col 1">
<p>F</p>
</div>
  <div class="col 1">
<p>S</p>
</div>
  <div class="col 1">
<p>S</p>
</div>
</div>



<div class="row">
<div class="col 1 day" id="d0">
<p id="0"></p>
</div>
<div class="col 1 day" id="d1">
<p id="1"></p>
</div>
<div class="col 1 day" id="d2">
<p id="2"></p>
</div>
<div class="col 1 day" id="d3">
<p id="3"></p>
</div>
<div class="col 1 day" id="d4">
<p id="4"></p>
</div>
<div class="col 1 day" id="d5">
<p id="5"></p>
</div>
<div class="col 1 day" id="d6">
<p id="6"></p>
</div>
</div>
<br>
<div class="row">
  <div class="col-1" id="d10" style="width:5px;font-size: 0.6em;">
  <p>8AM</p>
  </div>
  <div class="col 1 time" id="d10">
  <p id="10"></p>
  </div>
  <div class="col 1 time" id="d11">
  <p id="11"></p>
  </div>
  <div class="col 1 time" id="d12">
  <p id="12"></p>
  </div>
  <div class="col 1 time" id="d13">
  <p id="13"></p>
  </div>
  <div class="col 1 time" id="d14">
  <p id="14"></p>
  </div>
  <div class="col 1 time" id="d15">
  <p id="15"></p>
  </div>
  <div class="col 1 time" id="d16">
  <p id="16"></p>
  </div>
</div>

<div class="row">
  <div class="col-1" id="d10" style="width:5px;font-size: 0.6em;">
<p>9</p>
  </div>
  <div class="col 1 time" id="d20">
  <p id="20"></p>
  </div>
  <div class="col 1 time" id="d21">
  <p id="21"></p>
  </div>
  <div class="col 1 time" id="d22">
  <p id="22"></p>
  </div>
  <div class="col 1 time" id="d23">
  <p id="23"></p>
  </div>
  <div class="col 1 time" id="d24">
  <p id="24"></p>
  </div>
  <div class="col 1 time" id="d25">
  <p id="25"></p>
  </div>
  <div class="col 1 time" id="d26">
  <p id="26"></p>
  </div>
</div>
<div class="row">
  <div class="col-1" id="d10" style="width:5px;font-size: 0.6em;">
  <p>10</p>
  </div>
  <div class="col 1 time" id="d30">
  <p id="30"></p>
  </div>
  <div class="col 1 time" id="d31">
  <p id="31"></p>
  </div>
  <div class="col 1 time" id="d32">
  <p id="32"></p>
  </div>
  <div class="col 1 time" id="d33">
  <p id="33"></p>
  </div>
  <div class="col 1 time" id="d34">
  <p id="34"></p>
  </div>
  <div class="col 1 time" id="d35">
  <p id="35"></p>
  </div>
  <div class="col 1 time" id="d36">
  <p id="36"></p>
  </div>
</div>
<div class="row">
  <div class="col-1" id="d10" style="width:5px;font-size: 0.6em;">
<p>11</p>
  </div>
  <div class="col 1 time" id="d40">
  <p id="40"></p>
  </div>
  <div class="col 1 time" id="d41">
  <p id="41"></p>
  </div>
  <div class="col 1 time" id="d42">
  <p id="42"></p>
  </div>
  <div class="col 1 time" id="d43">
  <p id="43"></p>
  </div>
  <div class="col 1 time" id="d44">
  <p id="44"></p>
  </div>
  <div class="col 1 time" id="d45">
  <p id="45"></p>
  </div>
  <div class="col 1 time" id="d46">
  <p id="46"></p>
  </div>
</div>
<div class="row">
  <div class="col-1" id="d10" style="width:5px;font-size: 0.6em;">
  <p>12PM</p>
  </div>
  <div class="col 1 time" id="d50">
  <p id="50"></p>
  </div>
  <div class="col 1 time" id="d51">
  <p id="51"></p>
  </div>
  <div class="col 1 time" id="d52">
  <p id="52"></p>
  </div>
  <div class="col 1 time" id="d53">
  <p id="53"></p>
  </div>
  <div class="col 1 time" id="d54">
  <p id="54"></p>
  </div>
  <div class="col 1 time" id="d55">
  <p id="55"></p>
  </div>
  <div class="col 1 time" id="d56">
  <p id="56"></p>
  </div>
</div>
<div class="row">
  <div class="col-1" id="d10" style="width:5px;font-size: 0.6em;">
<p>1</p>
  </div>
  <div class="col 1 time" id="d60">
  <p id="60"></p>
  </div>
  <div class="col 1 time" id="d61">
  <p id="61"></p>
  </div>
  <div class="col 1 time" id="d62">
  <p id="62"></p>
  </div>
  <div class="col 1 time" id="d63">
  <p id="63"></p>
  </div>
  <div class="col 1 time" id="d64">
  <p id="64"></p>
  </div>
  <div class="col 1 time" id="d65">
  <p id="65"></p>
  </div>
  <div class="col 1 time" id="d66">
  <p id="66"></p>
  </div>
</div>
<div class="row">
  <div class="col-1" id="d10" style="width:5px;font-size: 0.6em;">
<p>2</p>
  </div>
  <div class="col 1 time" id="d70">
  <p id="70"></p>
  </div>
  <div class="col 1 time" id="d71">
  <p id="71"></p>
  </div>
  <div class="col 1 time" id="d72">
  <p id="72"></p>
  </div>
  <div class="col 1 time" id="d73">
  <p id="73"></p>
  </div>
  <div class="col 1 time" id="d74">
  <p id="74"></p>
  </div>
  <div class="col 1 time" id="d75">
  <p id="75"></p>
  </div>
  <div class="col 1 time" id="d76">
  <p id="76"></p>
  </div>
</div>
<div class="row">
  <div class="col-1" id="d10" style="width:5px;font-size: 0.6em;">
  <p>3</p>
  </div>
  <div class="col 1 time" id="d80">
  <p id="80"></p>
  </div>
  <div class="col 1 time" id="d81">
  <p id="81"></p>
  </div>
  <div class="col 1 time" id="d82">
  <p id="82"></p>
  </div>
  <div class="col 1 time" id="d83">
  <p id="83"></p>
  </div>
  <div class="col 1 time" id="d84">
  <p id="84"></p>
  </div>
  <div class="col 1 time" id="d85">
  <p id="85"></p>
  </div>
  <div class="col 1 time" id="d86">
  <p id="86"></p>
  </div>
</div>
<div class="row">
  <div class="col-1" id="d10" style="width:5px;font-size: 0.6em;">
  <p>4</p>
  </div>
  <div class="col 1 time" id="d90">
  <p id="90"></p>
  </div>
  <div class="col 1 time" id="d91">
  <p id="91"></p>
  </div>
  <div class="col 1 time" id="d92">
  <p id="92"></p>
  </div>
  <div class="col 1 time" id="d93">
  <p id="93"></p>
  </div>
  <div class="col 1 time" id="d94">
  <p id="94"></p>
  </div>
  <div class="col 1 time" id="d95">
  <p id="95"></p>
  </div>
  <div class="col 1 time" id="d96">
  <p id="96"></p>
  </div>
</div>
<div class="row">
  <div class="col-1" id="d10" style="width:5px;font-size: 0.6em;">
  <p>5</p>
  </div>
  <div class="col 1 time" id="d100">
  <p id="100"></p>
  </div>
  <div class="col 1 time" id="d101">
  <p id="101"></p>
  </div>
  <div class="col 1 time" id="d102">
  <p id="102"></p>
  </div>
  <div class="col 1 time" id="d103">
  <p id="103"></p>
  </div>
  <div class="col 1 time" id="d104">
  <p id="104"></p>
  </div>
  <div class="col 1 time" id="d105">
  <p id="105"></p>
  </div>
  <div class="col 1 time" id="d106">
  <p id="106"></p>
  </div>
</div>
<div class="row">
  <div class="col-1" id="d10" style="width:5px;font-size: 0.6em;">
  <p>6</p>
  </div>
  <div class="col 1 time" id="d110">
  <p id="110"></p>
  </div>
  <div class="col 1 time" id="d111">
  <p id="111"></p>
  </div>
  <div class="col 1 time" id="d112">
  <p id="112"></p>
  </div>
  <div class="col 1 time" id="d113">
  <p id="113"></p>
  </div>
  <div class="col 1 time" id="d114">
  <p id="114"></p>
  </div>
  <div class="col 1 time" id="d115">
  <p id="115"></p>
  </div>
  <div class="col 1 time" id="d116">
  <p id="116"></p>
  </div>
</div>



<div id="bigAdd">
<img src="../image/add.png" id="addTimeButton" height="50px" width="50px" data-toggle="modal" data-target="#exampleModal2">
</div>
<br>
<br>

  </div>

  <div class = "modal fade" id = "exampleModal" tabindex = "-1" role = "dialog" aria-labelledby ="exampleModalLabel" aria-hidden = "true">
             <div class="modal-dialog modal-dialog-centered" role="document">
                <div class = "modal-content">
                   <div class = "modal-header" >
                      <h5 class = "modal-title text-center col-12" id = "exampleModalLabel"><br>
                          </h5>

                    <hr>
                   </div>

                   <div class = "modal-body">
                   </div>

        </div>
        </div>
        </div>

        <div class = "modal fade" id = "exampleModal2" tabindex = "-1" role = "dialog" aria-labelledby ="exampleModalLabel" aria-hidden = "true">
                   <div class="modal-dialog modal-dialog-centered" role="document">
                      <div class = "modal-content">
                        <div class = "modal-header" >
                           <h6 class = "modal-title text-center col-12" id = "wcreate">
                             Which are you creating?
                           </h6>


                        </div>

                         <div class = "modal-body">
                           <div class="row">
                             <div class="col-6 text-center" style="border-right:1px solid black" id="goToAddTime">
                               Event
                               </div>
                               <div class="col-6 text-center">
                               Reminder
                             </div>
                             </div>

                         </div>

              </div>
              </div>
              </div>



  <script src = "https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity = "sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin = "anonymous"></script>
</body>
<script type="text/javascript" src="../script/api.js"></script>
<script type="text/javascript">

//document.getElementById("tusername").innerHTML = localStorage.getItem("username") + "'s timetable"
function blockPressed(id){
  var clearS = document.getElementsByClassName('smallAddTime')
  for(i=0;i<clearS.length;i++){
    clearS[i].style.backgroundColor = "white"
    clearS[i].style.borderWidth = "1px"
    clearS[i].style.borderStyle = 'ridge';
    clearS[i].innerHTML = ""
    clearS[i].style.height = "45px"
    clearS[i].setAttribute("onclick",'')
    clearS[i].setAttribute('class','col 1 time')
  }


  document.getElementById(id).style.backgroundColor = 'rgb(233, 207, 207)'
  document.getElementById(id).style.borderWidth = '2px'
  document.getElementById(id).style.borderStyle = 'solid'
  document.getElementById(id).innerHTML = "<img src='../image/smalladd.png' width='16px' height='13px' style='margin:14px;'>"
  var funcStr = 'goToAddTime("' + id +'")'
  document.getElementById(id).setAttribute('class','smallAddTime')
  document.getElementById(id).setAttribute('onclick',funcStr)

  // var newId = '#'+ id
  // $(newId).prop("onclick",null).off("click")
}
function goToAddTime(id){
  api.openFrame({
    name: 'Add Time page',
    url: 'addTime.html',
    // bounces:true,
    rect: { // 推荐使用Margin布局，用于适配屏幕的动态变化
        marginTop:0,
        marginBottom: 0, // main页面距离win顶部的高度
        w: 'auto' // main页面的宽度 自适应屏幕宽度
    },
    pageParam:({
      id:id
    })
  })
}

    apiready = function() {

      var theIp = ''
      $(function (){
        var myAjax = {
          init: function(){
            $.ajax({
              url: "../wifi.txt",
              async:false,
              success:function(data){
                theIp = data
              }
            })
          }
        };
        myAjax.init()
      });

      var curM = new Date().getMonth()
      var curY = new Date().getFullYear()
      var curr = new Date()

      var dayList = []
      for(i=0;i<7;i++){
      let first = curr.getDate() - curr.getDay() + i
      let day = new Date(curr.setDate(first)).getDate()
      dayList.push(day)
    }



      for(i=0;i<7;i++){

        document.getElementById(String(i)).innerHTML = dayList[i]

        var dday = "d" + String(i)
      }

      var allTime = document.getElementsByClassName('time')
      console.log(allTime)
      for(i=0;i<allTime.length;i++){
        var rId = allTime[i].id

        var funcStr = 'blockPressed("' + rId +'")'

        allTime[i].setAttribute('onclick',funcStr)
      }



      //insert load timeblock code here

      $("#goToAddTime").click(function(){
        $('#exampleModal2').modal('hide')
        api.openFrame({
          name: 'Add Time page',
          url: 'addTime.html',
          // bounces:true,
          rect: { // 推荐使用Margin布局，用于适配屏幕的动态变化
              marginTop:0,
              marginBottom: 0, // main页面距离win顶部的高度
              w: 'auto' // main页面的宽度 自适应屏幕宽度
          }
          //pageParam:
        })
      })





//       api.addEventListener({
//           name:'swipeleft'
//       }, function(ret, err){
//         api.openFrame({
//           name: "Calendar Page"+String(Math.random()),
//           url: 'calendar.html',
//           pageParam:({month:curM+1,year:curY}),
//           rect: {
//             marginTop: 132,
//             marginBottom: 60,
//               w: 'auto'
//           },
//           animation:{
//             type:"movein",
//             subType:"from_right"
//           },
//         })
//    })
//    api.addEventListener({
//        name:'swiperight'
//    }, function(ret, err){
//      api.openFrame({
//        name: "Calendar Page"+String(Math.random()),
//        url: 'calendar.html',
//        pageParam:({month:curM-1,year:curY}),
//        rect: {
//          marginTop: 132,
//          marginBottom: 60,
//            w: 'auto'
//        },
//        animation:{
//          type:"movein",
//          subType:"from_left"
//        },
//      })
// })


    };

</script>

</html>
