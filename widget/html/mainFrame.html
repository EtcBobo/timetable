<!DOCTYPE HTML>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="maximum-scale=1.0, minimum-scale=1.0, user-scalable=0, initial-scale=1.0, width=device-width" />
    <meta name="format-detection" content="telephone=no, email=no, date=no, address=no">
    <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css" integrity="sha384-9gVQ4dYFwwWSjIDZnLEWnxCjeSWFphJiwGPXr1jddIhOegiu1FwO5qRGvFXOdJZ4" crossorigin="anonymous">
    <title>Main Page</title>
    <link rel="stylesheet" type="text/css" href="../css/api.css" />
    <style type="text/css">
        html,
        body {
            height: 100%;
        }
        .wrap {
            display: -webkit-box;
            -webkit-box-orient: vertical;
            -webkit-flex-flow: column;
        }
        .flex-1 {
            -webkit-box-flex: 1;
            -webkit-flex: 1;
        }
        footer {
            width: 100%;
            color: black;
            text-align: center;
            font-size: 0.9em;


        }
    </style>
</head>
<body class="wrap">
  <header>
      <div class="container" style="background-color:#EFDFCF;height:105px;">
      <br>
        <div class="row" >
          <div class="col-11">
           <span id="hmonth" style="font-size:1.5em;margin:0"></span><span id="hyear" style="padding-left:5px;"></span>
          </div>
          <!-- <div class="col-1">
          <img src="../image/add.png" id="goToAddTime" height="25px" width="25px" style="float:right;"  data-toggle="modal" data-target="#exampleModal2">
        </div> -->
          <div class="col-1">
            <img src="../image/setting.png" id="goToSetting" width="25px" height="25px" style="float:right">
          </div>
        </div>

        <div class="row" style="margin-top:15px;">
          <div class="col 6" style="text-align:center;border-bottom:2px solid #A0AC9E;padding-bottom:4px;" id="tmonthly">
            <p>Monthly</p>
          </div>
          <div class="col 6" style="text-align:center;padding-bottom:4px;" id="tweekly">
            <p>Weekly</p>
          </div>
        </div>
      </div>
  </header>
    <section class="flex-1">
    </section>

    <footer>
    <div class="container" style="background-color:#EFDFCF;height:60px;">
      <div class="row" style="padding-top:10px;">
        <div class="col-4" id="goToCalendar">
          <img src="../image/calendar.png" width="25px" height="25px">
          <br>
          <p style="font-size:0.8em;">Calendar</p>
        </div>
        <div class="col-4" id="goToTime">
          <img src="../image/timetable.png" width="25px" height="25px">
          <br>
          <p style="font-size:0.8em;">Timetable</p>
        </div>
        <div class="col-4" id="goToProfile">
          <img src="../image/chat.png" width="25px" height="25px">
          <br>
          <p style="font-size:0.8em;">Chat</p>
        </div>

      </div>
    </div>

    </footer>


</body>
<script type="text/javascript">
    apiready = function() {

      api.addEventListener({
          name: 'changeMonth'
      }, function(ret, err) {
        document.getElementById("hmonth").innerHTML = ret.value.month
        document.getElementById("hyear").innerHTML = ret.value.year
      });

        var header = $api.dom('header');
        var footer = $api.dom('footer');
        var headerH = $api.fixStatusBar(header);
        var footerH = $api.fixTabBar(footer);
        console.log(headerH)

        api.addEventListener({
            name: 'keyback'
        }, function(ret, err) {
          var frames = api.frames()
          console.log(JSON.stringify(frames))
          if(frames.length > 1){
            api.closeFrame({
              name:frames[frames.length-1].name
            });
          }
        });

        $("#goToProfile").click(function(){


          api.openFrame({
            name: 'Profile page',
            url: 'profile.html',
            // bounces:true,
            rect: { // 推荐使用Margin布局，用于适配屏幕的动态变化
                marginTop:headerH,
                marginBottom: footerH, // main页面距离win顶部的高度
                w: 'auto' // main页面的宽度 自适应屏幕宽度
            }
          })
        })

        $("#tweekly").click(function(){
          document.getElementById("tweekly").style.borderBottom = "2px solid #A0AC9E"
          document.getElementById("tmonthly").style.borderBottom = ""
          console.log('checking from weekly')
          api.openFrame({
            name: 'Weekly page',
            url: 'weekly.html',

            rect: { // 推荐使用Margin布局，用于适配屏幕的动态变化
                marginTop:headerH,
                marginBottom: footerH, // main页面距离win顶部的高度
                w: 'auto' // main页面的宽度 自适应屏幕宽度
            }
            //page param
          })
        })

        $("#tmonthly").click(function(){
          document.getElementById("tmonthly").style.borderBottom = "2px solid #A0AC9E"
          document.getElementById("tweekly").style.borderBottom = ""
          api.openFrame({
            name: 'Calendar page',
            url: 'calendar.html',

            rect: { // 推荐使用Margin布局，用于适配屏幕的动态变化
                marginTop:headerH,
                marginBottom: footerH, // main页面距离win顶部的高度
                w: 'auto' // main页面的宽度 自适应屏幕宽度
            }
            //page param
          })
        })

        $("#goToCalendar").click(function(){


            api.closeFrame({
              name:"Add Time page"
            });


          api.openFrame({
            name: 'Calendar page',
            url: 'calendar.html',
            // bounces:true,
            rect: { // 推荐使用Margin布局，用于适配屏幕的动态变化
                marginTop:headerH,
                marginBottom: footerH, // main页面距离win顶部的高度
                w: 'auto' // main页面的宽度 自适应屏幕宽度
            }
          })
        })

        $("#goToTime").click(function(){
          api.closeFrame({
            name:"Add Time page"
          });
          api.openFrame({
            name: 'Timetable page',
            url: 'timetable.html',
            // bounces:true,
            rect: { // 推荐使用Margin布局，用于适配屏幕的动态变化
                marginTop:headerH,
                marginBottom: footerH, // main页面距离win顶部的高度
                w: 'auto' // main页面的宽度 自适应屏幕宽度
            }
          })
        })

        $("#goToSetting").click(function(){ //not using footer

          api.openFrame({
            name: 'Setting page',
            url: 'setting.html',

            rect: { // 推荐使用Margin布局，用于适配屏幕的动态变化
                marginTop:headerH,
                marginBottom: footerH, // main页面距离win顶部的高度
                w: 'auto' // main页面的宽度 自适应屏幕宽度
            }
          })
        })


        api.openFrame({
            name: 'Calendar page',
            url: 'calendar.html',
            // bounces:true,
            rect: { // 推荐使用Margin布局，用于适配屏幕的动态变化
                marginTop:headerH,
                marginBottom: footerH, // main页面距离win顶部的高度
                w: 'auto' // main页面的宽度 自适应屏幕宽度
            }
        });
    }
</script>


<script type="text/javascript" src="../script/api.js"></script>


</html>
